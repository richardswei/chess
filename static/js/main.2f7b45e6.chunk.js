(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{11:function(e,i,t){e.exports=t(19)},16:function(e,i,t){},17:function(e,i,t){},18:function(e,i,t){},19:function(e,i,t){"use strict";t.r(i);var n=t(0),o=t.n(n),a=t(8),r=t.n(a),l=(t(16),t(17),t(9)),c=t(2),s=t(3),p=t(6),u=t(4),h=t(1),v=t(5),b=(t(18),t(10));function g(e){return e.reduce((function(e,i){var t=i[1];return e[t]||(e[t]={}),e[t][i[0]]=!0,e}),{})}function d(e,i,t){try{return t[e][i]}catch(n){return null}}function f(e,i,t){var n=t[e][i];if("king"!==n.pieceType||n.hasMoved)return[];var o={0:[1,2,3],7:[5,6]},a=[],r=M(t,n.pieceColor);return d(e,i,r)?[]:([0,7].forEach((function(i){if(!d(e,i,t).hasMoved&&!o[i].map((function(i){return!!d(e,i,t)||!!d(e,i,r)})).reduce((function(e,i){return!(!e&&!i)}))){var n=i<4?2:6;a.push([n,e])}})),a)}function y(e,i,t,n){var o=[],a=t[e][i];if("pawn"===a.pieceType){var r="white"===a.pieceColor?-1:1,l=q.diagonalCapture.map((function(t){return[t[0]+i,r*t[1]+e]})).filter((function(e){var i=d(e[1],e[0],t);return i&&i.pieceColor!==a.pieceColor}));if(o.push.apply(o,Object(b.a)(l)),!a.hasMoved)d(e+2*r,i,t)||d(e+1*r,i,t)||o.push([i,e+2*r]);if(n.enPassantAvailableAt){var c=n.enPassantAvailableAt,s=function(e,i){if(null===e||null===i)return{};var t=[];return i-1>=0&&t.push([i-1,e]),i+1<8&&t.push([i+1,e]),g(t)}(c[1],c[0]);d(e,i,s)&&o.push([c[0],c[1]+r])}}return o}function M(e,i){for(var t=[],n=0;n<8;n++)for(var o=0;o<8;o++)try{var a=e[n][o];if(a.pieceColor===i)continue;if("pawn"===a.pieceType){var r="white"===a.pieceColor?-1:1;t=t.concat([[o+1,n+r],[o-1,n+r]])}else t=t.concat(a.eligibleMovesList)}catch(l){continue}return g(t)}function k(e){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=JSON.parse(JSON.stringify(e)),n=0;n<8;n++)for(var o=0;o<8;o++)try{var a=w(n,o,t);if(!a)continue;var r=t[n][o].pieceType;"king"===r&&(a=a.concat(f(n,o,t))),"pawn"===r&&(a=a.concat(y(n,o,t,i))),t[n][o].eligibleMovesList=a}catch(l){continue}return t}function w(e,i,t){var n=d(e,i,t);if(!n)return!1;var o=[i,e],a=L[n.pieceType],r=a.unitMoves.map((function(t){var o="white"===n.pieceColor?-1:1;return[i+o*t[0],e+o*t[1]]})).filter((function(e){if(e[0]<0||e[0]>7||e[1]<0||e[1]>7)return!1;var i=d(e[1],e[0],t);return(!i||"pawn"!==n.pieceType)&&(i?i.pieceColor:null)!==n.pieceColor}));return a.unlimitedRange?0===r.length?[]:r.map((function(t){return[t[0]-i,t[1]-e]})).map((function(e){return function e(i,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var r=n[0];var l=n[1];var c=[t[0]+r,t[1]+l];var s=c[0]<0||c[0]>7||c[1]<0||c[1]>7;if(s)return a;var p=d(c[1],c[0],o);var u=p?p.pieceColor:null;if(u===i.pieceColor)return a;if(u&&u!==i.pieceColor)return a.push(c),a;a.push(c);return e(i,c,n,o,a)}(n,o,e,t)})).flat():r}function m(e,i,t){var n=M(t,e);return!!d(i[1],i[0],n)}function C(e,i,t){return"king"===e.pieceType&&("black"===e.pieceColor?t.blackKingPosition=[i[0],i[1]]:t.whiteKingPosition=[i[0],i[1]]),t}function T(e,i,t,n,o){var a=function(e,i,t,n,o){return"pawn"===e.pieceType&&o.enPassantAvailableAt[0]===t[0]&&o.enPassantAvailableAt[1]===i[1]&&(n[i[1]][t[0]]=null),n}(e,i,t,n,o);!function(e,i,t,n){if("king"===e.pieceType){var o=t[0]-i[0],a=t[1];if(2===Math.abs(o))switch(o<0){case!0:return n[5]||(n[5]={}),console.log("castle queenside"),n[a][3]=n[a][0],n[a][0]=null,n;case!1:return n[3]||(n[3]={}),console.log("castle kingside"),n[a][5]=n[a][7],n[a][7]=null,n;default:console.log("castle error")}}}(e,i,t,n);return function(e,i,t,n){return"pawn"===e.pieceType&&(0!==t[1]&&7!==t[1]||(n[t[1]][t[0]].pieceType="queen")),n}(e,0,t,a)}function O(e,i,t,n){return"pawn"===e.pieceType&&2===Math.abs(t[1]-i[1])?n.enPassantAvailableAt=t:n.enPassantAvailableAt=[null,null],n}var S={white:{king:"\u2654",queen:"\u2655",rook:"\u2656",bishop:"\u2657",knight:"\u2658",pawn:"\u2659"},black:{king:"\u265a",queen:"\u265b",rook:"\u265c",bishop:"\u265d",knight:"\u265e",pawn:"\u265f"}},j={king:{unlimitedRange:!1,unitMoves:[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,-1],[-1,1],[1,-1]]},queen:{unlimitedRange:!0,unitMoves:[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,-1],[-1,1],[1,-1]]},rook:{unlimitedRange:!0,unitMoves:[[0,1],[0,-1],[-1,0],[1,0]]},bishop:{unlimitedRange:!0,unitMoves:[[1,1],[-1,-1],[-1,1],[1,-1]]},knight:{unlimitedRange:!1,unitMoves:[[1,2],[-1,-2],[1,-2],[-1,2],[2,1],[-2,-1],[2,-1],[-2,1]]},pawn:{unlimitedRange:!1,unitMoves:[[0,1]]}},L={king:j.king,queen:j.queen,rook:j.rook,bishop:j.bishop,knight:j.knight,pawn:j.pawn},P={0:{0:{pieceColor:"black",pieceType:"rook",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"black",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"black",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"black",pieceType:"queen",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"black",pieceType:"king",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"black",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"black",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"black",pieceType:"rook",eligibleMovesList:[],hasMoved:!1}},1:{0:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1}},6:{0:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1}},7:{0:{pieceColor:"white",pieceType:"rook",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"white",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"white",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"white",pieceType:"queen",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"white",pieceType:"king",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"white",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"white",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"white",pieceType:"rook",eligibleMovesList:[],hasMoved:!1}}},q={diagonalCapture:[[-1,1],[1,1]]};function A(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}var E=function(e){function i(e){var t;Object(c.a)(this,i),(t=Object(p.a)(this,Object(u.a)(i).call(this,e))).handleNewGame=t.handleNewGame.bind(Object(h.a)(t)),t.handleLoadGame=t.handleLoadGame.bind(Object(h.a)(t)),t.handleSquareClick=t.handleSquareClick.bind(Object(h.a)(t));return t.state={boardSetup:P,highlightedSquares:{},hotSquare:null,playerTurn:"white",check:!1,enPassantAvailableAt:[null,null],threatenedSpaces:[],whiteKingPosition:[4,7],blackKingPosition:[4,0],jumbotronMessage:"WHITE's Move"},t}return Object(v.a)(i,e),Object(s.a)(i,[{key:"componentDidMount",value:function(){var e=k(JSON.parse(JSON.stringify(this.state.boardSetup)),{});this.setState({boardSetup:e})}},{key:"handleNewGame",value:function(){}},{key:"handleLoadGame",value:function(){}},{key:"handleSquareClick",value:function(e){if(this.state.hotSquare)this.executeMove(this.state.boardSetup,this.state.highlightedSquares,e.coordinate,this.state.hotSquare),this.setState((function(e){return{highlightedSquares:{},hotSquare:null}}));else{var i=d(e.coordinate[1],e.coordinate[0],this.state.boardSetup);i&&this.setState((function(t){return{highlightedSquares:i.pieceColor===e.playerTurn?g(i.eligibleMovesList):{},hotSquare:e.coordinate}}))}}},{key:"executeMove",value:function(e,i,t,n){var o=this.state.playerTurn,a=n[1],r=n[0],c=d(a,r,e);if(!c)return!1;if(c.pieceColor!==o)return!1;var s=t[1],p=t[0],u="white"===o?"black":"white";if(d(s,p,i)){var h=JSON.parse(JSON.stringify(e));h[a][r].hasMoved=!0,h[s]||(h[s]={}),h[s][p]=h[a][r],h[a][r]=null;var v={};v.enPassantAvailableAt=this.state.enPassantAvailableAt,v.whiteKingPosition=this.state.whiteKingPosition,v.blackKingPosition=this.state.blackKingPosition;var b=h[s][p],g=k(h=T(b,n,t,h,v),v=C(b,t,v=O(b,n,t,v))),f=m(o,v[o+"KingPosition"],g);if(this.state.check&&f)alert("You are checked!");else if(f)alert("You cannot move into check!");else{v.jumbotronMessage="".concat(u.toUpperCase(),"'s Move");var y=u+"KingPosition",w=M(g,u),S=function(e,i,t){for(var n=0;n<8;n++)for(var o=0;o<8;o++){var a=d(n,o,i);if(a&&a.pieceColor===e){var r=!0,l=!1,c=void 0;try{for(var s,p=a.eligibleMovesList[Symbol.iterator]();!(r=(s=p.next()).done);r=!0){var u=s.value,h=u[0],v=u[1],b=JSON.parse(JSON.stringify(i));b[v]||(b[v]={}),b[v][h]=b[n][o],b[n][o]=null;var g={};g.enPassantAvailableAt=t.enPassantAvailableAt,g.whiteKingPosition=t.whiteKingPosition,g.blackKingPosition=t.blackKingPosition,g.check=t.check;var f=b[v][h],y=[n,o],M=k(b=T(f,y,u,b,g),g=C(f,u,g=O(f,y,u,g)));if(!m(e,g[e+"KingPosition"],M))return!0}}catch(w){l=!0,c=w}finally{try{r||null==p.return||p.return()}finally{if(l)throw c}}}}return!1}(u,g=function(e,i,t){for(var n=0;n<8;n++)for(var o=0;o<8;o++){var a=d(n,o,e);if(a&&(t===a.pieceColor&&"king"===a.pieceType))return e[n][o].eligibleMovesList=a.eligibleMovesList.filter((function(e){return!d(e[1],e[0],i)})),e}}(g,w,u),v),j=m(u,v[y],g);j&&!S?(alert("".concat(u.toUpperCase()," has been checkmated!")),v.jumbotronMessage="".concat(u.toUpperCase()," has been checkmated!")):S?j?(v.check=!0,alert("".concat(u.toUpperCase()," is checked!")),v.jumbotronMessage=v.jumbotronMessage+"-(in check)"):v.check=!1:(alert("Game ends in a stalemate!"),v.jumbotronMessage="Game ends in a stalemate!"),this.setState(function(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?A(t,!0).forEach((function(i){Object(l.a)(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}({boardSetup:g,playerTurn:u,threatenedSpaces:w},v))}}}},{key:"render",value:function(){return this.state&&o.a.createElement("div",null,o.a.createElement(J,{jumbotronMessage:this.state.jumbotronMessage}),o.a.createElement(K,Object.assign({className:"board",handleSquareClick:this.handleSquareClick},this.state)))}}]),i}(n.Component),K=function(e){function i(e){var t;return Object(c.a)(this,i),(t=Object(p.a)(this,Object(u.a)(i).call(this,e))).renderSquare=t.renderSquare.bind(Object(h.a)(t)),t}return Object(v.a)(i,e),Object(s.a)(i,[{key:"renderSquare",value:function(e,i,t,n){return o.a.createElement(N,Object.assign({key:e,color:(i%2+e%2+1)%2===0?"black":"white",highlighted:d(i,t,this.props.highlightedSquares),coordinate:[t,i],symbol:this.getPieceSymbol(n)},this.props))}},{key:"getPieceAttributes",value:function(e){try{return j[e.pieceType]}catch(i){return{}}}},{key:"getPieceSymbol",value:function(e){var i=e?e.pieceColor:null,t=e?e.pieceType:null;try{return S[i][t]}catch(n){return null}}},{key:"getHighlightedStatus",value:function(e,i,t){try{return!!e[i][t]}catch(n){return!1}}},{key:"render",value:function(){var e=this,i=this.props.boardSetup,t=Array(8).fill(1).map((function(e,i){return i})),n=Array(8).fill(1).map((function(e,i){return i}));return i&&o.a.createElement("div",null,t.map((function(t){return o.a.createElement("div",{className:"boardRow",key:t},n.map((function(n){var o=t,a=n,r=8*t+a,l=d(o,a,i);return e.renderSquare(r,o,a,l)})))})))}}]),i}(n.Component),N=function(e){function i(){return Object(c.a)(this,i),Object(p.a)(this,Object(u.a)(i).apply(this,arguments))}return Object(v.a)(i,e),Object(s.a)(i,[{key:"render",value:function(){var e=this,i=this.props.highlighted;return o.a.createElement("button",{onClick:function(){return e.props.handleSquareClick(e.props)},className:"".concat(this.props.color," ").concat(i?"highlighted":""," square ")},this.props.symbol&&o.a.createElement("div",null,this.props.symbol))}}]),i}(n.Component),J=function(e){function i(){return Object(c.a)(this,i),Object(p.a)(this,Object(u.a)(i).apply(this,arguments))}return Object(v.a)(i,e),Object(s.a)(i,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",null,this.props.jumbotronMessage))}}]),i}(n.Component),G=E;var R=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.2f7b45e6.chunk.js.map