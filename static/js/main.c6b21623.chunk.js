(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{23:function(e,t,i){e.exports=i(33)},28:function(e,t,i){},29:function(e,t,i){},30:function(e,t,i){},33:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),o=i(14),r=i.n(o),l=(i(28),i(29),i(11)),s=i(15),c=i(6),p=i(7),u=i(9),h=i(8),v=i(5),b=i(10);i(30);function d(e){return e.reduce((function(e,t){var i=t[1];return e[i]||(e[i]={}),e[i][t[0]]=!0,e}),{})}function f(e,t,i){try{return i[e][t]}catch(n){return null}}function g(e,t,i){var n=i[e][t];if("king"!==n.pieceType||n.hasMoved)return[];var a={0:[1,2,3],7:[5,6]},o=[],r=k(i,n.pieceColor);return f(e,t,r)?[]:([0,7].forEach((function(t){if(!f(e,t,i).hasMoved&&!a[t].map((function(t){return!!f(e,t,i)||!!f(e,t,r)})).reduce((function(e,t){return!(!e&&!t)}))){var n=t<4?2:6;o.push([n,e])}})),o)}function y(e,t,i,n){var a=[],o=i[e][t];if("pawn"===o.pieceType){var r="black"===o.pieceColor?-1:1,s=P.diagonalCapture.map((function(i){return[i[0]+t,r*i[1]+e]})).filter((function(e){var t=f(e[1],e[0],i);return t&&t.pieceColor!==o.pieceColor}));if(a.push.apply(a,Object(l.a)(s)),!o.hasMoved)f(e+2*r,t,i)||f(e+1*r,t,i)||a.push([t,e+2*r]);if(n.enPassantAvailableAt){var c=n.enPassantAvailableAt,p=function(e,t){if(null===e||null===t)return{};var i=[];return t-1>=0&&i.push([t-1,e]),t+1<8&&i.push([t+1,e]),d(i)}(c[1],c[0]);f(e,t,p)&&a.push([c[0],c[1]+r])}}return a}function k(e,t){for(var i=[],n=0;n<8;n++)for(var a=0;a<8;a++)try{var o=e[n][a];if(o.pieceColor===t)continue;if("pawn"===o.pieceType){var r="black"===o.pieceColor?-1:1;i=i.concat([[a+1,n+r],[a-1,n+r]])}else i=i.concat(o.eligibleMovesList)}catch(l){continue}return d(i)}function M(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=JSON.parse(JSON.stringify(e)),n=0;n<8;n++)for(var a=0;a<8;a++)try{var o=m(n,a,i);if(!o)continue;var r=i[n][a].pieceType;"king"===r&&(o=o.concat(g(n,a,i))),"pawn"===r&&(o=o.concat(y(n,a,i,t))),i[n][a].eligibleMovesList=o}catch(l){continue}return i}function m(e,t,i){var n=f(e,t,i);if(!n)return!1;var a=[t,e],o=L[n.pieceType],r=o.unitMoves.map((function(i){var a="black"===n.pieceColor?-1:1;return[t+a*i[0],e+a*i[1]]})).filter((function(e){if(e[0]<0||e[0]>7||e[1]<0||e[1]>7)return!1;var t=f(e[1],e[0],i);return(!t||"pawn"!==n.pieceType)&&(t?t.pieceColor:null)!==n.pieceColor}));return o.unlimitedRange?0===r.length?[]:r.map((function(i){return[i[0]-t,i[1]-e]})).map((function(e){return function e(t,i,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=n[0],l=n[1],s=[i[0]+r,i[1]+l];if(s[0]<0||s[0]>7||s[1]<0||s[1]>7)return o;var c=f(s[1],s[0],a),p=c?c.pieceColor:null;if(p===t.pieceColor)return o;if(p&&p!==t.pieceColor)return o.push(s),o;return o.push(s),e(t,s,n,a,o)}(n,a,e,i)})).flat():r}function w(e,t,i){var n=k(i,e);return!!f(t[1],t[0],n)}function C(e,t,i){return"king"===e.pieceType&&("black"===e.pieceColor?i.blackKingPosition=[t[0],t[1]]:i.whiteKingPosition=[t[0],t[1]]),i}function O(e,t,i,n,a){var o=function(e,t,i,n,a){return"pawn"===e.pieceType&&a.enPassantAvailableAt[0]===i[0]&&a.enPassantAvailableAt[1]===t[1]&&(n[t[1]][i[0]]=null),n}(e,t,i,n,a);!function(e,t,i,n){if("king"===e.pieceType){var a=i[0]-t[0],o=i[1];if(2===Math.abs(a))switch(a<0){case!0:return n[5]||(n[5]={}),n[o][3]=n[o][0],n[o][0]=null,n;case!1:return n[3]||(n[3]={}),n[o][5]=n[o][7],n[o][7]=null,n;default:console.log("castle error")}}}(e,t,i,n);return function(e,t,i,n){return"pawn"===e.pieceType&&(0!==i[1]&&7!==i[1]||(n[i[1]][i[0]].pieceType="queen")),n}(e,0,i,o)}function j(e,t,i,n){return"pawn"===e.pieceType&&2===Math.abs(i[1]-t[1])?n.enPassantAvailableAt=i:n.enPassantAvailableAt=[null,null],n}var T={white:{king:"\u2654",queen:"\u2655",rook:"\u2656",bishop:"\u2657",knight:"\u2658",pawn:"\u2659"},black:{king:"\u265a",queen:"\u265b",rook:"\u265c",bishop:"\u265d",knight:"\u265e",pawn:"\u265f"}},S={king:{unlimitedRange:!1,unitMoves:[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,-1],[-1,1],[1,-1]]},queen:{unlimitedRange:!0,unitMoves:[[0,1],[0,-1],[-1,0],[1,0],[1,1],[-1,-1],[-1,1],[1,-1]]},rook:{unlimitedRange:!0,unitMoves:[[0,1],[0,-1],[-1,0],[1,0]]},bishop:{unlimitedRange:!0,unitMoves:[[1,1],[-1,-1],[-1,1],[1,-1]]},knight:{unlimitedRange:!1,unitMoves:[[1,2],[-1,-2],[1,-2],[-1,2],[2,1],[-2,-1],[2,-1],[-2,1]]},pawn:{unlimitedRange:!1,unitMoves:[[0,1]]}},L={king:S.king,queen:S.queen,rook:S.rook,bishop:S.bishop,knight:S.knight,pawn:S.pawn},P={diagonalCapture:[[-1,1],[1,1]]},E={lastMove:"New Game",history:[],blackOnTop:!0,boardSetup:{0:{0:{pieceColor:"white",pieceType:"rook",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"white",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"white",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"white",pieceType:"queen",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"white",pieceType:"king",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"white",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"white",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"white",pieceType:"rook",eligibleMovesList:[],hasMoved:!1}},1:{0:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"white",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1}},6:{0:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"black",pieceType:"pawn",eligibleMovesList:[],hasMoved:!1}},7:{0:{pieceColor:"black",pieceType:"rook",eligibleMovesList:[],hasMoved:!1},1:{pieceColor:"black",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},2:{pieceColor:"black",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},3:{pieceColor:"black",pieceType:"queen",eligibleMovesList:[],hasMoved:!1},4:{pieceColor:"black",pieceType:"king",eligibleMovesList:[],hasMoved:!1},5:{pieceColor:"black",pieceType:"bishop",eligibleMovesList:[],hasMoved:!1},6:{pieceColor:"black",pieceType:"knight",eligibleMovesList:[],hasMoved:!1},7:{pieceColor:"black",pieceType:"rook",eligibleMovesList:[],hasMoved:!1}}},highlightedSquares:{},hotSquare:null,playerTurn:"white",check:!1,enPassantAvailableAt:[null,null],threatenedSpaces:[],whiteKingPosition:[4,0],blackKingPosition:[4,7],jumbotronMessage:"WHITE's Move"},q=i(36),A=i(37),N=i(38),K=i(39),J=i(40);function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var H=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleNewGame=i.handleNewGame.bind(Object(v.a)(i)),i.handleLoadGame=i.handleLoadGame.bind(Object(v.a)(i)),i.handleSquareClick=i.handleSquareClick.bind(Object(v.a)(i)),i.handleHistoryClick=i.handleHistoryClick.bind(Object(v.a)(i)),i.state=E,i}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=M(JSON.parse(JSON.stringify(this.state.boardSetup)),{});this.setState({boardSetup:e})}},{key:"handleNewGame",value:function(){}},{key:"handleLoadGame",value:function(){}},{key:"handleHistoryClick",value:function(e,t){0===t?this.setState(E):this.setState(e.history[t])}},{key:"handleSquareClick",value:function(e){if(console.log(this.state),this.state.hotSquare)this.executeMove(this.state.boardSetup,this.state.highlightedSquares,e.coordinate,this.state.hotSquare),this.setState((function(e){return{highlightedSquares:{},hotSquare:null}}));else{var t=f(e.coordinate[1],e.coordinate[0],this.state.boardSetup);t&&this.setState((function(i){return{highlightedSquares:t.pieceColor===e.playerTurn?d(t.eligibleMovesList):{},hotSquare:e.coordinate}}))}}},{key:"executeMove",value:function(e,t,i,n){var a=this.state.playerTurn,o=n[1],r=n[0],l=f(o,r,e);if(!l)return!1;if(l.pieceColor!==a)return!1;var c=i[1],p=i[0],u="white"===a?"black":"white";if(f(c,p,t)){var h=JSON.parse(JSON.stringify(e));h[o][r].hasMoved=!0,h[c]||(h[c]={}),h[c][p]=h[o][r],h[o][r]=null;var v={};v.enPassantAvailableAt=this.state.enPassantAvailableAt,v.whiteKingPosition=this.state.whiteKingPosition,v.blackKingPosition=this.state.blackKingPosition;var b=h[c][p];v.lastMove="".concat(b.pieceColor,": ").concat(b.pieceType," to ").concat(i);var d=M(h=O(b,n,i,h,v),v=C(b,i,v=j(b,n,i,v))),g=w(a,v[a+"KingPosition"],d);if(this.state.check&&g)alert("You will still be in check!");else if(g)alert("You cannot move into check!");else{v.jumbotronMessage="".concat(u.toUpperCase(),"'s Move");var y=u+"KingPosition",m=k(d,u),T=function(e,t,i){for(var n=0;n<8;n++)for(var a=0;a<8;a++){var o=f(n,a,t);if(o&&o.pieceColor===e){var r=!0,l=!1,s=void 0;try{for(var c,p=o.eligibleMovesList[Symbol.iterator]();!(r=(c=p.next()).done);r=!0){var u=c.value,h=u[0],v=u[1],b=JSON.parse(JSON.stringify(t));b[v]||(b[v]={}),b[v][h]=b[n][a],b[n][a]=null;var d={};d.enPassantAvailableAt=i.enPassantAvailableAt,d.whiteKingPosition=i.whiteKingPosition,d.blackKingPosition=i.blackKingPosition,d.check=i.check;var g=b[v][h],y=[n,a],k=M(b=O(g,y,u,b,d),d=C(g,u,d=j(g,y,u,d)));if(!w(e,d[e+"KingPosition"],k))return!0}}catch(m){l=!0,s=m}finally{try{r||null==p.return||p.return()}finally{if(l)throw s}}}}return!1}(u,d=function(e,t,i){for(var n=0;n<8;n++)for(var a=0;a<8;a++){var o=f(n,a,e);if(o&&(i===o.pieceColor&&"king"===o.pieceType))return e[n][a].eligibleMovesList=o.eligibleMovesList.filter((function(e){return!f(e[1],e[0],t)})),e}}(d,m,u),v),S=w(u,v[y],d);S&&!T?(alert("".concat(u.toUpperCase()," has been checkmated!")),v.jumbotronMessage="".concat(u.toUpperCase()," has been checkmated!")):T?S?(v.check=!0,alert("".concat(u.toUpperCase()," is checked!")),v.jumbotronMessage=v.jumbotronMessage+"-(in check)"):v.check=!1:(alert("Game ends in a stalemate!"),v.jumbotronMessage="Game ends in a stalemate!"),this.setState(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({history:this.state.history.concat(this.state),boardSetup:d,playerTurn:u,threatenedSpaces:m},v))}}}},{key:"render",value:function(){return this.state&&a.a.createElement("div",null,a.a.createElement(q.a,{fluid:!0},a.a.createElement("h1",null,"Chess")),a.a.createElement("br",null),a.a.createElement(A.a,null,a.a.createElement(N.a,null),a.a.createElement(N.a,null,a.a.createElement(D,{jumbotronMessage:this.state.jumbotronMessage})),a.a.createElement(N.a,null,a.a.createElement(K.a,{className:"chessboard",xs:12,md:8},a.a.createElement(R,Object.assign({className:"board",handleSquareClick:this.handleSquareClick},this.state))),a.a.createElement(K.a,{className:"moveHistory",xs:6,md:4},a.a.createElement(B,{handleHistoryClick:this.handleHistoryClick,lastMove:this.state.lastMove,history:this.state.history})))))}}]),t}(n.Component),R=function(e){function t(e){var i;return Object(c.a)(this,t),(i=Object(u.a)(this,Object(h.a)(t).call(this,e))).renderSquare=i.renderSquare.bind(Object(v.a)(i)),i}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderSquare",value:function(e,t,i,n){return a.a.createElement(x,Object.assign({key:e,color:(t%2+e%2)%2===0?"black":"white",highlighted:f(t,i,this.props.highlightedSquares),coordinate:[i,t],symbol:this.getPieceSymbol(n)},this.props))}},{key:"getPieceSymbol",value:function(e){var t=e?e.pieceColor:null,i=e?e.pieceType:null;try{return T[t][i]}catch(n){return null}}},{key:"buildBoard",value:function(e,t,i,n){var o=this,r=t?Object(l.a)(i).reverse():i,s=t?n:Object(l.a)(n).reverse();if(e){var c=r.map((function(t){return a.a.createElement("div",{className:"boardRow",key:t},s.map((function(i){var n=t,a=i,r=8*t+a,l=f(n,a,e);return o.renderSquare(r,n,a,l)})))}));return a.a.createElement("div",null,c)}}},{key:"render",value:function(){var e=this.props.boardSetup,t=this.props.blackOnTop,i=Array(8).fill(1).map((function(e,t){return t})),n=Array(8).fill(1).map((function(e,t){return t}));return this.buildBoard(e,t,i,n)}}]),t}(n.Component),x=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.highlighted;return a.a.createElement("button",{onClick:function(){return e.props.handleSquareClick(e.props)},className:"".concat(this.props.color," ").concat(t?"highlighted":""," square ")},this.props.symbol&&a.a.createElement("div",null,this.props.symbol))}}]),t}(n.Component),D=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h5",null,this.props.jumbotronMessage))}}]),t}(n.Component),B=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(J.a,null,this.props.history&&this.props.history.map((function(t,i){return a.a.createElement(J.a.Item,{action:!0,key:i,onClick:function(){return e.props.handleHistoryClick(e.props,i)},variant:"dark",className:"move"},t.lastMove)})),a.a.createElement(J.a.Item,{variant:"dark",className:"move"},this.props.lastMove))}}]),t}(n.Component),I=H;var U=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i(32);r.a.render(a.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.c6b21623.chunk.js.map